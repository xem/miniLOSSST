<body id=b>

<button onclick=location=location>Reset</button>

<br><br>

<script>
gridsize = 5;
snakesize = 16;

ok=0;

while(!ok){
  snake = [[x=Math.random() * gridsize | 0, y=Math.random() * gridsize | 0]];
  snakeflat = [y*snakesize+x];

  ok=1;
  for(i=1;i<=snakesize;i++){
    neighbours = [[x>0?x-1:gridsize-1,y],[x,y>0?y-1:gridsize-1],[x<gridsize-1?x+1:0,y],[x,y<gridsize-1?y+1:0]];
    neighbour = neighbours[Math.random() * 4 | 0];
    x=neighbour[0];
    y=neighbour[1];
    snake.push(neighbour);
    if(snakeflat.includes(y*gridsize+x)) { ok = 0; break; }
    else { snakeflat.push(y*gridsize+x); }
  }
}


h="";
for(i=0;i<gridsize;i++){
  for(j=0;j<gridsize;j++){
    h+="<div style='float:left;width:3ch;height:3ch;background:#"+(snakeflat.includes(j*gridsize+i)?"000":"fff")+";border:1px solid'></div>"
  }
  h+="<br style=clear:both>";
}
b.innerHTML+=h;
</script>