<body style=width:48ch id=b>
<script>
onkeydown=d=e=>{

// Don't move when the snake is green
if(!w){

// Puzzle size
z=l<5?+"75766"[l]:l<18?5:l<25?6:0;

// Read keyCode
k=e.which%36;

// Space to skip
if(k==32){w=n=0;d(++l)}

// Move / reset snake
k<5?
(  
  // Target square
  q=p+[,-1,-16,1,16][k],
  
  // Wrap
  n&&2==m(q)&&(q+=[,z,16*z,-z,-16*z][k]),
  
  // Go inbounds
  m(q)<2&&(n=1),
  
  // Move snake if no collision 
  s.includes(q)||(s=[p=q,...s]) 
)


// Other keys: reset
:(n=0,s=[p=65,64])

// Truncate snake
s.length=l<5?14:l<18?15:l<22?16:20

// Color of the current cell (0:pattern/1:wrap area/2:exterior)
m=p=>{
  x=p%16;y=p>>4;
  return 5>x||x>5+z-1||2>y||y>2+z-1
  ?2
  :1-(
    parseInt(
      "1hrdfddq8y,g3t6b,2tc09uicht,1ibkfyb,pesw8s3,9jorj,j7r6m,jio5o,fv5kd,jokrj,jdyrj,b2lvj,b1asx,jopxb,9luxq,d8473,jnejl,jrkbh,e03aae4,427yw3s,im7v7p,ofbd9ip,46nskug,p2yhnzn,ofaqrjz,0".split(",")[l],36
    )/2**(z*(y-2)+(x-5))&1
  )
};
  
// Check solution
w=s.every(w=p=>!m(p))

// Win
&&setTimeout("w=n=0;d(++l)",500);

// Draw scene
for(B=i="";i<160;)
b.innerHTML=B+=`<a style=width:3ch;height:3ch;float:left;background:#${
s.includes(i)?w?792:"da6":[111,,359][m(i)]}>${i++-p?"":"👀"}`

}

};

// Reset inbounds flag & start
d(w=l=n=0);
</script>